<!DOCTYPE html>
<html>

<header>
    <meta charset="UTF-8"> 
    <!-- use the CS559 Style Sheet -->
    <link rel="stylesheet" href="style559.css">
    <script>
        /**
        * define the "addStart" function that gives a new function to be
        * called at window.onload - but first calls the old handler
        * @param {function} func
        */
        function addStart(func) {
            // make a local variable and store the old value of the handler
            // this will be kept in closure when we define the new handler function
            let previousStart = window.onload;
            // define a new handler function and assign it to window.onload
            window.onload = function() {
                // if no previous start was given, then its value will be undefined,
                // so we cannot call it as a function
                if (previousStart) previousStart();
                // now we can call the function that we want to call
                func();
            }
        }
    </script>
</header>

<body>

    <div id="box05" class="examplebox">
        <p>
            In the first button example, we stuck code right into the button's handler
            when we created the button. That's not a good place to put code.
            Instead, what we will do to attach JavaScript to buttons is to
            write JavaScript that finds the button on the page and changes it.
            Of course, that code cannot be run until after the page is loaded
            (since we need to make sure that the button has been created before we
            change it).
        </p>
        <p>
            Here is a <button id="Box05button">button</button>.
            Look at the code (which is in the HTML file) to see how the handler
            is set up (and of course, check the console to see that it works).
        </p>
        <script>
            function button5handler() {
                console.log("Box 5's button was pressed");
            }
            function setupButton5() {
                let button = document.getElementById("Box05button");
                button.onclick = button5handler
            }
            addStart(setupButton5);
        </script>
        <p>
            Here is <button id="button5another">another button</button>.
            The code to set it up does the same thing, it's just written in a
            different style. Read the code and make sure you see how it works.
        </p>
        <script>
            addStart(function() {
                let button = document.getElementById("button5another");
                button.onclick = function() {
                    console.log("Box 5's other button was pressed");
                }
            });
        </script>
        <p>
            And while you're looking at code... Here's
            <button id="button5yetanother">yet another button</button>.
            This one does something slightly more complicated, and makes
            use of a closure. Look at the console to figure out what
            is happeneing.
        </p>
        <script>
                addStart(function() {
                    let button = document.getElementById("button5yetanother");
                    let count=0;
                    button.onclick = function() {
                        count = count+1;
                        console.log("Box 5's third button has been pressed "+count.toString()+" times.");
                    }
                });
            </script>
            <p>
                This (the "yet another button") example uses another closure,
                so you can start to figure out how closures work.
            </p>
            <p>
                There's one other thing left for this example: try out the debugger in the browser that you are using.
                Try to put a break point in the code to stop the program when the button is
                clicked.
                This program is so simple that you won't need a debugger, but soon,
                we'll be writing bigger programs, and you'll be happy that you know
                how to use the debugger.
            </p>
       </div>


</body>